//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated from a template.
//     Changes to this file may cause incorrect behavior and will be lost if the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------
// Copyright (c) Matthieu MEZIL.  All rights reserved.
// matthieu.mezil@live.fr

 
using System.Net;
using System.ServiceModel;
using System.ServiceModel.Channels;
using System.ServiceModel.Dispatcher;

namespace WCFAsyncQueryableServices.WCFService
{
    public class ExceptionHandlerMessageInspector : IDispatchMessageInspector
    {
    	public object AfterReceiveRequest(ref Message request, IClientChannel channel, InstanceContext instanceContext)
    	{
    		return null;
    	}
    
    	public void BeforeSendReply(ref Message reply, object correlationState)
    	{
    		if (reply != null && reply.IsFault)
    			reply.Properties[HttpResponseMessageProperty.Name] = new HttpResponseMessageProperty { StatusCode = HttpStatusCode.OK };
    	}
    }
}
